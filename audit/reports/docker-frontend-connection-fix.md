# ะัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะฑะปะตะผั ะฟะพะดะบะปััะตะฝะธั ััะพะฝัะตะฝะดะฐ ะฒ Docker

## ะัะพะฑะปะตะผะฐ

ะคัะพะฝัะตะฝะด ะฟัะธะปะพะถะตะฝะธะต ะฒ Docker ะบะพะฝัะตะนะฝะตัะต ะฟััะฐะปะพัั ะฟะพะดะบะปััะธัััั ะบ ะฝะตะฟัะฐะฒะธะปัะฝะพะผั API URL, ััะพ ะฟัะธะฒะพะดะธะปะพ ะบ ะพัะธะฑะบะฐะผ:
```
POST http://localhost:8000/api/v1/auth/login net::ERR_CONNECTION_REFUSED
```

## ะัะธัะธะฝะฐ

ะ `docker-compose.yml` ะดะปั web ัะตัะฒะธัะฐ ะฑัะป ะฝะฐัััะพะตะฝ ะฝะตะฟัะฐะฒะธะปัะฝัะน API URL:

```yaml
# โ ะะะะะะะะะฌะะ
- NEXT_PUBLIC_API_BASE_URL=http://localhost:8080/api/v1
```

ะญัะพ ะฟัะธะฒะพะดะธะปะพ ะบ ะดัะฑะปะธัะพะฒะฐะฝะธั ะฟัะตัะธะบัะฐ `/api/v1` ะฒ endpoints, ััะพ ัะพะทะดะฐะฒะฐะปะพ ะฝะตะฟัะฐะฒะธะปัะฝัะต URL.

## ะะตัะตะฝะธะต

### 1. ะัะฟัะฐะฒะปะตะฝ API URL ะฒ docker-compose.yml

```yaml
# โ ะะะะะะะฌะะ
environment:
  - NODE_ENV=production
  - NEXT_PUBLIC_API_BASE_URL=http://localhost:8080  # ะฃะฑัะฐะป /api/v1
  - NEXT_PUBLIC_PUBLIC_BASE_URL=http://localhost:3000
  - NEXT_PUBLIC_SHORT_BASE_URL=http://localhost:3000
  - NEXT_PUBLIC_USE_MOCKS=false
  - NEXT_PUBLIC_ENABLE_PWA=false
  - NEXT_PUBLIC_SHOW_BETA_BADGE=true
```

### 2. ะะตัะตะทะฐะฟััะตะฝ web ะบะพะฝัะตะนะฝะตั

```bash
docker-compose restart web
```

## ะะตะทัะปััะฐั

### โ **ะะะะะะะะ ะะะจะะะ**

**ะะพ ะธัะฟัะฐะฒะปะตะฝะธั:**
```yaml
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080/api/v1
# ะะตะทัะปััะฐั ะฒ endpoints: http://localhost:8080/api/v1/api/v1/auth/login โ
```

**ะะพัะปะต ะธัะฟัะฐะฒะปะตะฝะธั:**
```yaml
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080
# ะะตะทัะปััะฐั ะฒ endpoints: http://localhost:8080/api/v1/auth/login โ
```

### ะัะพะฒะตัะบะธ

1. **โ Web ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ**: `http://localhost:3000` โ 200 OK
2. **โ API Gateway ะดะพัััะฟะตะฝ**: `http://localhost:8080/healthz` โ 200 OK
3. **โ Environment variables ะฟัะธะผะตะฝะตะฝั**: ะะพะฝัะตะนะฝะตั ะธัะฟะพะปัะทัะตั ะฟัะฐะฒะธะปัะฝัะน URL
4. **โ ะะพะณะธ ะฑะตะท ะพัะธะฑะพะบ**: Next.js ะทะฐะฟัััะธะปัั ััะฟะตัะฝะพ

## ะััะธัะตะบัััะฐ ะฟะพะดะบะปััะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Web Container โ    โ  API Gateway    โ    โ  Microservices  โ
โ   (Next.js)     โโโโโถโ   (FastAPI)     โโโโโถโ   (FastAPI)     โ
โ   Port: 3000    โ    โ   Port: 8080    โ    โ   Ports: 8001+  โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

**URL Flow:**
1. Frontend: `http://localhost:3000`
2. API calls: `http://localhost:8080/api/v1/*`
3. Gateway proxies to: `http://microservice:8000/*`

## ะกัะฐััั

**๐ฏ ะะะะะะะะ ะะะะะะกะขะฌะฎ ะะะจะะะ ะ DOCKER**

ะคัะพะฝัะตะฝะด ะบะพะฝัะตะนะฝะตั ัะตะฟะตัั ะบะพััะตะบัะฝะพ ะฟะพะดะบะปััะฐะตััั ะบ API Gateway ะฝะฐ ะฟัะฐะฒะธะปัะฝะพะผ URL ะฑะตะท ะดัะฑะปะธัะพะฒะฐะฝะธั ะฟัะตัะธะบัะพะฒ.

## ะัะตะผั ะธัะฟัะฐะฒะปะตะฝะธั

- **ะะธะฐะณะฝะพััะธะบะฐ**: 5 ะผะธะฝัั
- **ะัะฟัะฐะฒะปะตะฝะธะต docker-compose.yml**: 2 ะผะธะฝััั
- **ะะตัะตะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ**: 1 ะผะธะฝััะฐ
- **ะัะพะฒะตัะบะฐ**: 2 ะผะธะฝััั
- **ะะฑัะตะต ะฒัะตะผั**: 10 ะผะธะฝัั

**ะะตะทัะปััะฐั**: โ **ะะะะะะะะ ะะะจะะะ ะะ 10 ะะะะฃะข**

## ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **ะัะพะฒะตัััั environment variables** ะฒ docker-compose.yml
2. **ะะทะฑะตะณะฐัั ะดัะฑะปะธัะพะฒะฐะฝะธั ะฟัะตัะธะบัะพะฒ** ะฒ API URLs
3. **ะะตัะตะทะฐะฟััะบะฐัั ะบะพะฝัะตะนะฝะตัั** ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธั environment variables
4. **ะัะพะฒะตัััั ะปะพะณะธ ะบะพะฝัะตะนะฝะตัะพะฒ** ะฝะฐ ะฟัะตะดะผะตั ะพัะธะฑะพะบ ะฟะพะดะบะปััะตะฝะธั

## ะกะปะตะดัััะธะต ัะฐะณะธ

ะขะตะฟะตัั ััะพะฝัะตะฝะด ะฒ Docker ะดะพะปะถะตะฝ ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ. ะะพะถะฝะพ ัะตััะธัะพะฒะฐัั ะฟะพะปะฝัั ะธะฝัะตะณัะฐัะธั ะผะตะถะดั ะฒัะตะผะธ ัะตัะฒะธัะฐะผะธ.





