# üöÄ –û—Ç—á–µ—Ç –ø–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–î–∞—Ç–∞**: 2025-09-06  
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: –ö–∞—Å—Ç–æ–º–Ω—ã–π Python —Å–∫—Ä–∏–ø—Ç —Å httpx  
**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã**: –í—Å–µ 12 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ + API Gateway + Scan Gateway  

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤** | 15 |
| **–£—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤** | 15 |
| **–¢–µ—Å—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏** | 0 |
| **–°—Ä–µ–¥–Ω–∏–π RPS** | 2.12 |
| **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** | 2.669s |
| **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π p95** | 13.346s |

### 2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º

#### ‚úÖ API Gateway (–ø–æ—Ä—Ç 8080)
- **Health Check**: ‚úÖ 200 OK
- **Docs**: ‚úÖ 200 OK
- **RPS**: 2.10-2.19
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: avg=1.969s, p95=2.937s, p99=3.287s
- **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: avg=5.815s, p95=9.509s, p99=13.603s

#### ‚úÖ Scan Gateway (–ø–æ—Ä—Ç 8086)
- **Health Check**: ‚úÖ 200 OK
- **RPS**: 2.12-1.91
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: avg=2.070s, p95=2.788s, p99=3.215s
- **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: avg=8.334s, p95=13.346s, p99=15.449s

#### ‚ùå –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (–ø–æ—Ä—Ç—ã 8001-8011)
- **Health Check**: ‚ùå 404 Not Found
- **–ü—Ä–æ–±–ª–µ–º–∞**: –≠–Ω–¥–ø–æ–∏–Ω—Ç `/health` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- **RPS**: 1.94-2.18
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: avg=1.830s-2.238s

### 3. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### üîç –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Health Endpoints**
- –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404 –Ω–∞ `/health`
- –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏

**2. –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ**
- –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ concurrent requests —Å 5 –¥–æ 20:
  - API Gateway: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –≤ 3 —Ä–∞–∑–∞ (1.969s ‚Üí 5.815s)
  - Scan Gateway: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –≤ 4 —Ä–∞–∑–∞ (2.070s ‚Üí 8.334s)

**3. –ù–∏–∑–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**
- –°—Ä–µ–¥–Ω–∏–π RPS ~2 –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–µ–∫—É–Ω–¥—É
- –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ RPS –ø–∞–¥–∞–µ—Ç –¥–æ 1.91

#### üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –°–µ—Ä–≤–∏—Å | RPS | Avg Response | P95 | P99 | –°—Ç–∞—Ç—É—Å |
|--------|-----|--------------|-----|-----|--------|
| API Gateway | 2.10 | 1.969s | 2.937s | 3.287s | ‚úÖ |
| API Gateway (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞) | 2.19 | 5.815s | 9.509s | 13.603s | ‚ö†Ô∏è |
| Scan Gateway | 2.12 | 2.070s | 2.788s | 3.215s | ‚úÖ |
| Scan Gateway (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞) | 1.91 | 8.334s | 13.346s | 15.449s | ‚ö†Ô∏è |
| Auth Service | 2.16 | 2.045s | 3.001s | 3.283s | ‚ùå |
| Album Service | 2.16 | 1.977s | 3.084s | 3.913s | ‚ùå |
| Media Service | 1.94 | 2.238s | 3.283s | 3.815s | ‚ùå |
| QR Service | 2.12 | 2.017s | 3.006s | 3.668s | ‚ùå |
| User Profile | 2.16 | 1.965s | 2.902s | 3.461s | ‚ùå |
| Analytics | 2.15 | 2.059s | 2.866s | 3.476s | ‚ùå |
| Billing | 2.17 | 2.057s | 2.676s | 3.123s | ‚ùå |
| Notification | 2.18 | 1.830s | 2.690s | 2.910s | ‚ùå |
| Moderation | 2.13 | 1.876s | 2.668s | 3.210s | ‚ùå |
| Print | 2.15 | 1.844s | 2.599s | 2.771s | ‚ùå |

### 4. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

#### üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Health Checks**
```bash
# –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404
curl http://localhost:8001/health  # 404
curl http://localhost:8002/health  # 404
# ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

**2. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**
- –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ concurrent requests –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Ä–∞—Å—Ç–µ—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç connection pooling
- –ù–µ—Ç rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤

**3. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å—Ä–µ–¥–Ω–µ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

**1. –í—ã—Å–æ–∫–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**
- P95 > 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- –ù–µ–ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è production

**2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏

### 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

#### üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**1. –î–æ–±–∞–≤–∏—Ç—å Health Endpoints**
```python
# –í –∫–∞–∂–¥–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ
@app.get("/health")
async def health_check():
    return {"status": "healthy", "timestamp": datetime.utcnow()}

@app.get("/health/ready")
async def readiness_check():
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ë–î, Redis, etc.)
    return {"status": "ready"}
```

**2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Connection Pooling**
```python
# –í database.py –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
engine = create_async_engine(
    database_url,
    pool_size=20,
    max_overflow=30,
    pool_pre_ping=True,
    pool_recycle=3600
)
```

**3. –î–æ–±–∞–≤–∏—Ç—å Resource Limits –≤ Docker**
```yaml
services:
  auth-svc:
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 512M
```

#### ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –î–æ–±–∞–≤–∏—Ç—å Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î

**2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- Prometheus –º–µ—Ç—Ä–∏–∫–∏
- Grafana –¥–∞—à–±–æ—Ä–¥—ã
- –ê–ª–µ—Ä—Ç—ã –Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é

**3. –î–æ–±–∞–≤–∏—Ç—å Rate Limiting**
```python
# –í –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.get("/api/endpoint")
@limiter.limit("100/minute")
async def endpoint(request: Request):
    pass
```

#### üîç –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Load Balancing**
- Nginx/HAProxy –ø–µ—Ä–µ–¥ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- Health checks –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞

**2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã**
- Multi-stage builds
- –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∏

### 6. –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

**1. Stress Testing**
```bash
# –¢–µ—Å—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
python load_test.py --concurrent 50 --requests 1000
```

**2. Endurance Testing**
```bash
# –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç (1 —á–∞—Å)
python load_test.py --duration 3600
```

**3. Spike Testing**
```bash
# –†–µ–∑–∫–∏–µ —Å–∫–∞—á–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
python load_test.py --spike-test
```

### 7. –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
- RPS (Requests Per Second)
- Response Time (avg, p95, p99)
- Error Rate
- Throughput

**–†–µ—Å—É—Ä—Å—ã**:
- CPU Usage
- Memory Usage
- Database Connections
- Network I/O

**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**:
- Uptime
- Health Check Status
- Service Discovery

### 8. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

#### ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (500)
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –±–∞–∑–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

#### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health endpoints
- –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- –ù–∏–∑–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

#### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ**: –î–æ–±–∞–≤–∏—Ç—å health endpoints
2. **–í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling –∏ resource limits
3. **–í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É—é—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
